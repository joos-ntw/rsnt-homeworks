# Домашнее задание к занятию  "Протоколы связующего дерева"

### Цель задания

Отказоустойчивость - это то, без чего не может существовать современная сеть. Один из способов повышения отказоустойчивости сети - резервирование физических линков. Но канальный уровень не имеет защиты от петли коммутации и не умеет выбирать лучший путь для фреймов до получателя. Эти проблемы решает STP. Важно понимать, как работает протокол и его термины.  

В результате выполнения этого задания вы:
1) Научитесь определять участников алгоритма STP.
2) Научитесь определять, какие порты заблокированы, какие пропускают трафик в случае резервирования физических связей на уровне L2.
3) Научитесь применять алгоритм STP в случае RSTP.  

### Инструкция к выполнению домашнего задания

1. Скачайте [Шаблон для домашнего задания](https://u.netology.ru/backend/uploads/lms/content_assets/file/281/%D0%A1%D0%94%D0%95%D0%9B%D0%90%D0%99%D0%A2%D0%95_%D0%9A%D0%9E%D0%9F%D0%98%D0%AE_-_%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%B4%D0%BB%D1%8F_%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F_1.1._%D0%9D%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8_-_%D0%A4%D0%B0%D0%BC%D0%B8%D0%BB%D0%B8%D1%8F_%D0%98%D0%BC%D1%8F.docx) на своё устройство.
2. Откройте скачанный файл на личном диске в Google.
3. В названии файла введите корректное название лекции и ваши фамилию и имя.
4. Зайдите в «Настройки доступа» и выберите доступ «Просматривать могут все в интернете, у кого есть ссылка». Инструкция «Как предоставить доступ к файлам и папкам на Google Диске» [по ссылке](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop).
5. Скопируйте текст задания в свой документ.
6. Выполните задание, запишите ответы и приложите необходимые скриншоты в свой Google-документ.
7. Для проверки домашнего задания отправьте ссылку на ваш Google-документ в личном кабинете.
8. Любые вопросы по решению задач можно задать в чате учебной группы, в чате поддержки или в разделе «Вопросы по заданию» в личном кабинете.
9. Подробнее о работе с Google-документами и загрузке решения на проверку можно найти в [«Руководстве по работе с материалами для обучения»](https://l.netology.ru/instruktsiya-po-materialami-dlya-obucheniya)

------

### Задание 1.

<img width="1000" alt="STP_рц" src ="https://github.com/netology-code/rsnt-homeworks/blob/main/3-02/picture_hw_3_02_1.png">



Для  заданной схемы сети определите:
1) Корневой коммутатор
2) Корневые порты
3) Назначенный порты
4) Неназначенные порты 
 
Обоснуйте своё решение.  
В результате необходимо получить древовидную топологию сети во главе с корневым коммутатором. То есть определить, какие порты будут заблокированны, а какие будут пропускать трафик.  

*Приведите ответ в виде картинки со схемой (внесите изменения) или в виде таблицы. Обоснование в свободной форме.*

### Решение
![1](https://github.com/joos-ntw/rsnt-homeworks/blob/main/files/stp21.png)

---

### Задание 2.

Определите, что нужно изменить в настройках STP, чтобы на схеме из задания 1 изменился корневой коммутатор?  
Как изменится при этом топология?

В результате необходимо получить древовидную топологию сети во главе с корневым коммутатором. То есть определить, какие порты будут заблокированны, а какие будут пропускать трафик.  

*Приведите ответ в виде картинки со схемой (внесите изменения) или в виде таблицы. Обоснование в свободной форме.*

### Решение
Мы можем поменять приоритет коммутатора и тогда произойдет перестроение. Или можно понизить скорость работы портов/выключить порты на коммутаторе и тогда на основании новых приоритетов схема будет другая.

Например:
![2](https://github.com/joos-ntw/rsnt-homeworks/blob/main/files/stp22.png)

---

### Задание 3.

Опишите этапы алгоритма RSTP для сети, топология которой изменилась. По аналогии с описанием для STP на слайде № 48 презентации к лекции.

*Приведите ответ в свободной форме.*

Для корректной работы STP:
- Если коммутатор не получает BPDU от корневого коммутатора по истечении времени Max age, то он запускает новый процесс STA
- Обнаружив изменение топологии, коммутатор отправляет TCN BPDU корневому коммутатору.
- Корневой коммутатор отправляет BPDU остальным коммутаторам, чтобы за время Forward delay очистили таблицу MAC-адресов

При работе RSTP:
- После третьего потерянного BPDU пакета, то есть через 6 секунд, начинается перестройка топологии сети
- Обнаружив изменение топологии, коммутатор отправляет BPDU c флагом TC.
- Остальные коммутаторы после получения такого сообщения удаляют из таблицы все MAC-адреса, доступные через не edge-порты, за исключением того порта, через который был получен BPDU c флагом TC

---

### Правила приема домашнего задания

В личном кабинете отправлены:

- ссылка на документ (Google Doc или Google Sheet) с выполненным заданием. В документе настроены права доступа “Просматривать могут все в Интернете, у кого есть ссылка”;
- картинка со схемой с внесенными изменениями.


### Критерии оценки

1. Зачет - выполнены все задания, ответы даны в развернутой форме, приложены соответствующие скриншоты, в выполненных заданиях нет противоречий и нарушения логики.

2. На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки, нарушена методология.
